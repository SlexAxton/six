#!/usr/bin/env node

var path = require('path');
var fs = require('fs');
var readFileSync = fs.readFileSync;

var lib = path.join(path.dirname(fs.realpathSync(__filename)), '../lib');
var Sakefile = fs.realpathSync('./Sakefile');

var six = require(lib + '/six');
var cli = require(lib + '/../node_modules/sake/node_modules/sake/cli-app');

fs.readFileSync = function(file, enc){
  var ret = readFileSync(file, enc);
  if(file === Sakefile){
    ret = six.compile(ret);
  }
  return ret;
}

cli.run();